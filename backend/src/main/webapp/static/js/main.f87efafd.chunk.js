(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{195:function(e,t,n){},196:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},299:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(28),c=n.n(a),s=(n(195),n(5)),i=n(308),o=(n(196),n(17)),u=n(18),l=n(21),j=n(20),d=n(302),b=n(306),m=n(71),h=n(310),O=n(311),p=n(186),f=n(6),x=n(197),g={timeout:15e3,headers:{"Content-Type":"application/json"},withCredentials:!0},y=["get","post","put","delete"].reduce((function(e,t){return e[t]=function(e,n){var r=x.create(g);r.interceptors.response.use((function(e){return e.status>=200||e.status<300?e.data:Promise.reject("Request error, please try again later!")}),(function(e){return p.b.error("Request error, please try again later!"),Promise.reject(e)}));var a=Object(f.a)({method:t,url:e},"get"===t?"params":"data",n);return r.request(a).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},e}),{}),v=function(e){var t=e.username,n=e.password,r="/login?username=".concat(t,"&password=").concat(n);return y.post(r).then((function(){return p.b.success("Login successfully!")}))},S=function(e){return y.get("/restaurant/".concat(e,"/menu"))},C=function(){return y.post("/signup")},w=n(29),I=n(8),P=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.onFinish=function(t){e.setState({loading:!0}),v(t).then((function(){e.props.onSuccess(),e.props.history.push("/main")})).finally((function(){return e.setState({loading:!1})}))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(I.jsxs)(d.a,{name:"normal_login",className:"login__form",initialValues:{remember:!0},onFinish:this.onFinish,size:"large",children:[Object(I.jsx)(d.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(I.jsx)(b.a,{prefix:Object(I.jsx)(h.a,{}),placeholder:"Username"})}),Object(I.jsx)(d.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(I.jsx)(b.a.Password,{prefix:Object(I.jsx)(O.a,{}),type:"password",placeholder:"Password"})}),Object(I.jsx)(d.a.Item,{children:Object(I.jsx)(m.a,{style:{width:"100%"},type:"primary",htmlType:"submit",loading:this.state.loading,children:"Log in"})})]})}}]),n}(r.Component),_=Object(w.e)(P),k=n.p+"static/media/login_img.518eef0d.png",F=(n(291),function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(I.jsxs)("div",{className:"login__page",children:[Object(I.jsx)("span",{className:"login__img-container",children:Object(I.jsx)("img",{src:k,alt:""})}),Object(I.jsxs)("span",{className:"login__form-container",children:[Object(I.jsxs)("h1",{children:["Order",Object(I.jsx)("span",{children:"Any"}),"where"]}),Object(I.jsx)(_,{onSuccess:this.props.onSuccess})]})]})}}]),n}(r.Component)),R=F,N=(n(292),n(95)),q=N.a.Option,T=function(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1];return Object(r.useEffect)((function(){l(!0),y.get("/restaurants").then((function(e){return c(e)})).finally((function(e){return l(!1)}))}),[]),Object(I.jsx)(N.a,{className:"select__foodlist",value:e.curRest,loading:u,placeholder:"Select a restaurant",size:"large",onSelect:function(t){return e.onSelectRest(t)},children:a.map((function(e){return Object(I.jsx)(q,{value:e.id,children:e.name},e.id)}))})},U=n(303),L=n(301),z=n(69),A=n(190),D=function(e){var t=e.itemId,n=Object(r.useState)(!1),a=Object(s.a)(n,2),c=a[0],i=a[1];return Object(I.jsx)(z.a,{title:"Add to shopping cart",children:Object(I.jsx)(m.a,{loading:c,type:"primary",icon:Object(I.jsx)(A.a,{}),onClick:function(){i(!0),function(e){return y.post("/order/".concat(e))}(t).then((function(){return p.b.success("success")})).finally((function(){return i(!1)}))}})})},M=function(e){var t=e.menu;return Object(I.jsx)(U.b,{className:"menu-list-container",grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:t,renderItem:function(e){return Object(I.jsx)(U.b.Item,{children:Object(I.jsxs)(L.a,{title:e.name,extra:Object(I.jsx)(D,{itemId:e.id}),children:[Object(I.jsx)("img",{className:"menu-list-item__img",src:e.imageUrl,alt:""}),"Price: $".concat(e.price)]})})}})},E=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={curRest:null,menuData:[]},e.onSelectRest=function(t){return e.setState({curRest:t})},e.componentDidUpdate=function(t,n){n.curRest!==e.state.curRest&&S(e.state.curRest).then((function(t){return e.setState({menuData:t})}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.curRest,n=e.menuData;return Object(I.jsxs)("div",{children:[Object(I.jsx)(T,{curRest:t,onSelectRest:this.onSelectRest}),Object(I.jsx)(M,{menu:n})]})}}]),n}(r.Component),B=E,H=n(1),J=n(309),V=n(307),$=n(312),Y=n(304).a.Text,G=function(e){var t=e.price,n=e.cancel,a=e.clearCart,c=e.disableCheckout,i=Object(r.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1];return Object(I.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(I.jsx)(Y,{strong:!0,children:"Total Price: $".concat(t.toFixed(2))}),Object(I.jsxs)("div",{children:[Object(I.jsx)(m.a,{onClick:n,children:"Cancel"}),Object(I.jsx)(m.a,{type:"primary",onClick:function(){l(!0),y.get("/checkout").then((function(e){p.b.success("Successfully checkout!"),a()})).finally((function(){return l(!1)}))},loading:u,disabled:c||u,children:"Checkout"})]})]})},K=function(){var e,t,n,a=Object(r.useState)(!1),c=Object(s.a)(a,2),i=c[0],o=c[1],u=Object(r.useState)(!1),l=Object(s.a)(u,2),j=l[0],d=l[1],b=Object(r.useState)(),h=Object(s.a)(b,2),O=h[0],p=h[1],f=function(){return o(!1)};Object(r.useEffect)((function(){i&&(d(!0),y.get("/cart").then((function(e){return p(e)})).finally((function(){return d(!1)})))}),[i]);var x={type:"primary",shape:"round",size:"large",icon:Object(I.jsx)($.a,{})};return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(m.a,Object(H.a)(Object(H.a)({style:{margin:"auto 0"}},x),{},{onClick:function(){return o(!0)},children:"Cart"})),Object(I.jsx)(J.a,{title:"My Shopping Cart",visible:i,onClose:f,footer:Object(I.jsx)(G,{price:null!==(e=null===O||void 0===O?void 0:O.totalPrice)&&void 0!==e?e:0,cancel:f,disableCheckout:!(null===O||void 0===O||null===(t=O.orderItemList)||void 0===t?void 0:t.length),clearCart:function(){return p()}}),children:Object(I.jsx)(U.b,{loading:j,dataSource:null!==(n=null===O||void 0===O?void 0:O.orderItemList)&&void 0!==n?n:[],renderItem:function(e){return Object(I.jsx)(U.b.Item,{children:Object(I.jsx)(U.b.Item.Meta,{avatar:Object(I.jsx)(V.a,{src:e.menuItem.imageUrl}),title:e.menuItem.name,description:e.menuItem.description})})}})})]})},Q=n(146),W=n.p+"static/media/logo.65d53d4b.png",X=n(305),Z=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.onFinish=function(){e.setState({loading:!0}),C().then((function(){return p.b.success("Sign up successfully!")})).finally((function(){e.setState({loading:!1}),e.props.closeModal()}))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(I.jsxs)(d.a,{name:"normal_login",className:"login__form",initialValues:{remember:!0},onFinish:this.onFinish,size:"large",children:[Object(I.jsx)(d.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(I.jsx)(b.a,{prefix:Object(I.jsx)(h.a,{}),placeholder:"Username"})}),Object(I.jsx)(d.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(I.jsx)(b.a.Password,{prefix:Object(I.jsx)(O.a,{}),type:"password",placeholder:"Password"})}),Object(I.jsx)(d.a.Item,{name:"firstname",rules:[{required:!0,message:"Please input your first name!"}],children:Object(I.jsx)(b.a,{placeholder:"Firstname"})}),Object(I.jsx)(d.a.Item,{name:"lastname",rules:[{required:!0,message:"Please input your last name!"}],children:Object(I.jsx)(b.a,{placeholder:"Lastname"})}),Object(I.jsx)(d.a.Item,{children:Object(I.jsx)(m.a,{style:{width:"100%"},type:"primary",htmlType:"submit",loading:this.state.loading,children:"Log in"})})]})}}]),n}(r.Component),ee=Z,te=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(m.a,Object(H.a)(Object(H.a)({style:{margin:"auto 0"}},{type:"primary",shape:"round",size:"large"}),{},{onClick:function(){return a(!0)},children:"Sign Up"})),Object(I.jsx)(X.a,{title:"Sign Up",visible:n,onCancel:function(){return a(!1)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:Object(I.jsx)(ee,{closeModal:function(){return a(!1)}})})]})},ne=i.a.Header,re=i.a.Content;var ae=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(I.jsxs)(i.a,{className:"layout-container",style:{height:"100vh"},children:[Object(I.jsxs)(ne,{className:"layout__header",children:[Object(I.jsx)("img",{className:"header__logo",src:W,alt:""}),n?Object(I.jsx)(K,{}):Object(I.jsx)(te,{})]}),Object(I.jsx)(re,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:Object(I.jsxs)(Q.a,{children:[Object(I.jsx)(w.a,{exact:!0,path:"/",children:Object(I.jsx)(R,{onSuccess:function(){return a(!0)}})}),Object(I.jsx)(w.a,{path:"/main",children:Object(I.jsx)(B,{})})]})})]})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,313)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};c.a.render(Object(I.jsx)(ae,{}),document.getElementById("root")),ce()}},[[299,1,2]]]);
//# sourceMappingURL=main.f87efafd.chunk.js.map