(this.webpackJsonpOnlineOrder=this.webpackJsonpOnlineOrder||[]).push([[0],{185:function(e,t,n){},186:function(e,t,n){},274:function(e,t,n){},275:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(28),c=n.n(a),s=(n(185),n(5)),i=n(291),o=(n(186),n(17)),u=n(18),l=n(21),j=n(20),d=n(285),b=n(289),m=n(68),O=n(293),h=n(294),p=n(176),f=n(6),x=n(187),g={timeout:15e3,headers:{"Content-Type":"application/json"},withCredentials:!0},y=["get","post","put","delete"].reduce((function(e,t){return e[t]=function(e,n){var r=x.create(g);r.interceptors.response.use((function(e){return e.status>=200||e.status<300?e.data:Promise.reject("Request error, please try again later!")}),(function(e){return p.b.error("Request error, please try again later!"),Promise.reject(e)}));var a=Object(f.a)({method:t,url:e},"get"===t?"params":"data",n);return r.request(a).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},e}),{}),v=function(e){var t=e.username,n=e.password,r="/login?username=".concat(t,"&password=").concat(n);return y.post(r).then((function(){return p.b.success("Login successfully!")}))},S=function(e){return y.get("/restaurant/".concat(e,"/menu"))},w=function(){return y.post("/signup")},C=n(7),_=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.onFinish=function(t){e.setState({loading:!0}),v(t).then((function(){e.props.onSuccess()})).finally((function(){return e.setState({loading:!1})}))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(C.jsxs)(d.a,{name:"normal_login",className:"login__form",initialValues:{remember:!0},onFinish:this.onFinish,size:"large",children:[Object(C.jsx)(d.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(C.jsx)(b.a,{prefix:Object(C.jsx)(O.a,{}),placeholder:"Username"})}),Object(C.jsx)(d.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(C.jsx)(b.a.Password,{prefix:Object(C.jsx)(h.a,{}),type:"password",placeholder:"Password"})}),Object(C.jsx)(d.a.Item,{children:Object(C.jsx)(m.a,{style:{width:"100%"},type:"primary",htmlType:"submit",loading:this.state.loading,children:"Log in"})})]})}}]),n}(r.Component),I=_,P=n.p+"static/media/login_img.518eef0d.png",k=(n(274),function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(C.jsxs)("div",{className:"login__page",children:[Object(C.jsx)("span",{className:"login__img-container",children:Object(C.jsx)("img",{src:P,alt:""})}),Object(C.jsxs)("span",{className:"login__form-container",children:[Object(C.jsxs)("h1",{children:["Order",Object(C.jsx)("span",{children:"Any"}),"where"]}),Object(C.jsx)(I,{onSuccess:this.props.onSuccess})]})]})}}]),n}(r.Component)),F=k,R=(n(275),n(91)),N=R.a.Option,q=function(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1];return Object(r.useEffect)((function(){l(!0),y.get("/restaurants").then((function(e){return c(e)})).finally((function(e){return l(!1)}))}),[]),Object(C.jsx)(R.a,{className:"select__foodlist",value:e.curRest,loading:u,placeholder:"Select a restaurant",size:"large",onSelect:function(t){return e.onSelectRest(t)},children:a.map((function(e){return Object(C.jsx)(N,{value:e.id,children:e.name},e.id)}))})},T=n(286),U=n(284),L=n(66),A=n(180),z=function(e){var t=e.itemId,n=Object(r.useState)(!1),a=Object(s.a)(n,2),c=a[0],i=a[1];return Object(C.jsx)(L.a,{title:"Add to shopping cart",children:Object(C.jsx)(m.a,{loading:c,type:"primary",icon:Object(C.jsx)(A.a,{}),onClick:function(){i(!0),function(e){return y.post("/order/".concat(e))}(t).then((function(){return p.b.success("success")})).finally((function(){return i(!1)}))}})})},D=function(e){var t=e.menu;return Object(C.jsx)(T.b,{className:"menu-list-container",grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:t,renderItem:function(e){return Object(C.jsx)(T.b.Item,{children:Object(C.jsxs)(U.a,{title:e.name,extra:Object(C.jsx)(z,{itemId:e.id}),children:[Object(C.jsx)("img",{className:"menu-list-item__img",src:e.imageUrl,alt:""}),"Price: $".concat(e.price)]})})}})},M=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={curRest:null,menuData:[]},e.onSelectRest=function(t){return e.setState({curRest:t})},e.componentDidUpdate=function(t,n){n.curRest!==e.state.curRest&&S(e.state.curRest).then((function(t){return e.setState({menuData:t})}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.curRest,n=e.menuData;return Object(C.jsxs)("div",{children:[Object(C.jsx)(q,{curRest:t,onSelectRest:this.onSelectRest}),Object(C.jsx)(D,{menu:n})]})}}]),n}(r.Component),E=M,B=n(1),H=n(292),J=n(290),V=n(295),$=n(287).a.Text,Y=function(e){var t=e.price,n=e.cancel,a=e.clearCart,c=e.disableCheckout,i=Object(r.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1];return Object(C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(C.jsx)($,{strong:!0,children:"Total Price: $".concat(t.toFixed(2))}),Object(C.jsxs)("div",{children:[Object(C.jsx)(m.a,{onClick:n,children:"Cancel"}),Object(C.jsx)(m.a,{type:"primary",onClick:function(){l(!0),y.get("/checkout").then((function(e){p.b.success("Successfully checkout!"),a()})).finally((function(){return l(!1)}))},loading:u,disabled:c||u,children:"Checkout"})]})]})},G=function(){var e,t,n,a=Object(r.useState)(!1),c=Object(s.a)(a,2),i=c[0],o=c[1],u=Object(r.useState)(!1),l=Object(s.a)(u,2),j=l[0],d=l[1],b=Object(r.useState)(),O=Object(s.a)(b,2),h=O[0],p=O[1],f=function(){return o(!1)};Object(r.useEffect)((function(){i&&(d(!0),y.get("/cart").then((function(e){return p(e)})).finally((function(){return d(!1)})))}),[i]);var x={type:"primary",shape:"round",size:"large",icon:Object(C.jsx)(V.a,{})};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(m.a,Object(B.a)(Object(B.a)({style:{margin:"auto 0"}},x),{},{onClick:function(){return o(!0)},children:"Cart"})),Object(C.jsx)(H.a,{width:"50vw",title:"My Shopping Cart",visible:i,onClose:f,footer:Object(C.jsx)(Y,{price:null!==(e=null===h||void 0===h?void 0:h.totalPrice)&&void 0!==e?e:0,cancel:f,disableCheckout:!(null===h||void 0===h||null===(t=h.orderItemList)||void 0===t?void 0:t.length),clearCart:function(){return p(),void o(!1)}}),children:Object(C.jsx)(T.b,{loading:j,dataSource:null!==(n=null===h||void 0===h?void 0:h.orderItemList)&&void 0!==n?n:[],renderItem:function(e){return Object(C.jsx)(T.b.Item,{children:Object(C.jsx)(T.b.Item.Meta,{avatar:Object(C.jsx)(J.a,{src:e.menuItem.imageUrl}),title:e.menuItem.name,description:e.menuItem.description})})}})})]})},K=n.p+"static/media/logo.65d53d4b.png",Q=n(288),W=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.onFinish=function(){e.setState({loading:!0}),w().then((function(){return p.b.success("Sign up successfully!")})).finally((function(){e.setState({loading:!1}),e.props.closeModal()}))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(C.jsxs)(d.a,{name:"normal_login",className:"login__form",initialValues:{remember:!0},onFinish:this.onFinish,size:"large",children:[Object(C.jsx)(d.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(C.jsx)(b.a,{prefix:Object(C.jsx)(O.a,{}),placeholder:"Username"})}),Object(C.jsx)(d.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(C.jsx)(b.a.Password,{prefix:Object(C.jsx)(h.a,{}),type:"password",placeholder:"Password"})}),Object(C.jsx)(d.a.Item,{name:"firstname",rules:[{required:!0,message:"Please input your first name!"}],children:Object(C.jsx)(b.a,{placeholder:"Firstname"})}),Object(C.jsx)(d.a.Item,{name:"lastname",rules:[{required:!0,message:"Please input your last name!"}],children:Object(C.jsx)(b.a,{placeholder:"Lastname"})}),Object(C.jsx)(d.a.Item,{children:Object(C.jsx)(m.a,{style:{width:"100%"},type:"primary",htmlType:"submit",loading:this.state.loading,children:"Log in"})})]})}}]),n}(r.Component),X=W,Z=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(m.a,Object(B.a)(Object(B.a)({style:{margin:"auto 0"}},{type:"primary",shape:"round",size:"large"}),{},{onClick:function(){return a(!0)},children:"Sign Up"})),Object(C.jsx)(Q.a,{title:"Sign Up",visible:n,onCancel:function(){return a(!1)},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",children:Object(C.jsx)(X,{closeModal:function(){return a(!1)}})})]})},ee=i.a.Header,te=i.a.Content;var ne=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(C.jsxs)(i.a,{className:"layout-container",style:{height:"100vh"},children:[Object(C.jsxs)(ee,{className:"layout__header",children:[Object(C.jsxs)("span",{className:"header__logo-container",children:[Object(C.jsx)("img",{className:"header__logo",src:K,alt:""}),Object(C.jsxs)("h1",{children:["Order",Object(C.jsx)("span",{children:"Any"}),"where"]})]}),n?Object(C.jsx)(G,{}):Object(C.jsx)(Z,{})]}),Object(C.jsx)(te,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(C.jsx)(E,{}):Object(C.jsx)(F,{onSuccess:function(){return a(!0)}})})]})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,296)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};c.a.render(Object(C.jsx)(ne,{}),document.getElementById("root")),re()}},[[282,1,2]]]);
//# sourceMappingURL=main.4cb44741.chunk.js.map