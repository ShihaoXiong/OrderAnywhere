(this.webpackJsonpOnlineOrder=this.webpackJsonpOnlineOrder||[]).push([[0],{195:function(e,t,n){},196:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},299:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(28),a=n.n(r),s=(n(195),n(5)),i=n(308),o=(n(196),n(17)),u=n(18),l=n(21),j=n(20),d=n(302),b=n(306),O=n(71),m=n(310),h=n(311),p=n(186),f=n(6),x=n(197),g={timeout:15e3,headers:{"Content-Type":"application/json"},withCredentials:!0},v=["get","post","put","delete"].reduce((function(e,t){return e[t]=function(e,n){var c=x.create(g);c.interceptors.response.use((function(e){return e.status>=200||e.status<300?e.data:Promise.reject("Request error, please try again later!")}),(function(e){return p.b.error("Request error, please try again later!"),Promise.reject(e)}));var r=Object(f.a)({method:t,url:e},"get"===t?"params":"data",n);return c.request(r).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},e}),{}),y=function(e){var t=e.username,n=e.password,c="/login?username=".concat(t,"&password=").concat(n);return v.post(c).then((function(){return p.b.success("Login successfully!")}))},S=function(e){return v.get("/restaurant/".concat(e,"/menu"))},C=function(){return v.post("/signup")},w=n(29),_=n(8),I=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.onFinish=function(t){e.setState({loading:!0}),y(t).then((function(){e.props.onSuccess(),e.props.history.push("/main")})).finally((function(){return e.setState({loading:!1})}))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(_.jsxs)(d.a,{name:"normal_login",className:"login__form",initialValues:{remember:!0},onFinish:this.onFinish,size:"large",children:[Object(_.jsx)(d.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(_.jsx)(b.a,{prefix:Object(_.jsx)(m.a,{}),placeholder:"Username"})}),Object(_.jsx)(d.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(_.jsx)(b.a.Password,{prefix:Object(_.jsx)(h.a,{}),type:"password",placeholder:"Password"})}),Object(_.jsx)(d.a.Item,{children:Object(_.jsx)(O.a,{style:{width:"100%"},type:"primary",htmlType:"submit",loading:this.state.loading,children:"Log in"})})]})}}]),n}(c.Component),k=Object(w.e)(I),P=n.p+"static/media/login_img.518eef0d.png",R=(n(291),function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(_.jsxs)("div",{className:"login__page",children:[Object(_.jsx)("span",{className:"login__img-container",children:Object(_.jsx)("img",{src:P,alt:""})}),Object(_.jsxs)("span",{className:"login__form-container",children:[Object(_.jsxs)("h1",{children:["Order",Object(_.jsx)("span",{children:"Any"}),"where"]}),Object(_.jsx)(k,{onSuccess:this.props.onSuccess})]})]})}}]),n}(c.Component)),N=R,F=(n(292),n(95)),L=F.a.Option,T=function(e){var t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],a=n[1],i=Object(c.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1];return Object(c.useEffect)((function(){l(!0),v.get("/restaurants").then((function(e){return a(e)})).finally((function(e){return l(!1)}))}),[]),Object(_.jsx)(F.a,{className:"select__foodlist",value:e.curRest,loading:u,placeholder:"Select a restaurant",size:"large",onSelect:function(t){return e.onSelectRest(t)},children:r.map((function(e){return Object(_.jsx)(L,{value:e.id,children:e.name},e.id)}))})},q=n(303),D=n(301),U=n(69),A=n(190),z=function(e){var t=e.itemId,n=Object(c.useState)(!1),r=Object(s.a)(n,2),a=r[0],i=r[1];return Object(_.jsx)(U.a,{title:"Add to shopping cart",children:Object(_.jsx)(O.a,{loading:a,type:"primary",icon:Object(_.jsx)(A.a,{}),onClick:function(){i(!0),function(e){return v.post("/order/".concat(e))}(t).then((function(){return p.b.success("success")})).finally((function(){return i(!1)}))}})})},E=function(e){var t=e.menu;return Object(_.jsx)(q.b,{className:"menu-list-container",grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:t,renderItem:function(e){return Object(_.jsx)(q.b.Item,{children:Object(_.jsxs)(D.a,{title:e.name,extra:Object(_.jsx)(z,{itemId:e.id}),children:[Object(_.jsx)("img",{className:"menu-list-item__img",src:e.imageUrl,alt:""}),"Price: $".concat(e.price)]})})}})},B=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(o.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={curRest:null,menuData:[]},e.onSelectRest=function(t){return e.setState({curRest:t})},e.componentDidUpdate=function(t,n){n.curRest!==e.state.curRest&&S(e.state.curRest).then((function(t){return e.setState({menuData:t})}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.curRest,n=e.menuData;return Object(_.jsxs)("div",{children:[Object(_.jsx)(T,{curRest:t,onSelectRest:this.onSelectRest}),Object(_.jsx)(E,{menu:n})]})}}]),n}(c.Component),H=B,J=n(1),M=n(309),$=n(307),V=n(312),Y=n(304).a.Text,G=function(e){var t=e.price,n=e.cancel,r=e.clearCart,a=e.disableCheckout,i=Object(c.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1];return Object(_.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(_.jsx)(Y,{strong:!0,children:"Total Price: $".concat(t.toFixed(2))}),Object(_.jsxs)("div",{children:[Object(_.jsx)(O.a,{onClick:n,children:"Cancel"}),Object(_.jsx)(O.a,{type:"primary",onClick:function(){l(!0),v.get("/checkout").then((function(e){p.b.success("Successfully checkout!"),r()})).finally((function(){return l(!1)}))},loading:u,disabled:a||u,children:"Checkout"})]})]})},K=function(){var e,t,n,r=Object(c.useState)(!1),a=Object(s.a)(r,2),i=a[0],o=a[1],u=Object(c.useState)(!1),l=Object(s.a)(u,2),j=l[0],d=l[1],b=Object(c.useState)(),m=Object(s.a)(b,2),h=m[0],p=m[1],f=function(){return o(!1)};Object(c.useEffect)((function(){i&&(d(!0),v.get("/cart").then((function(e){return p(e)})).finally((function(){return d(!1)})))}),[i]);var x={type:"primary",shape:"round",size:"large",icon:Object(_.jsx)(V.a,{})};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O.a,Object(J.a)(Object(J.a)({style:{margin:"auto 0"}},x),{},{onClick:function(){return o(!0)},children:"Cart"})),Object(_.jsx)(M.a,{width:"50vw",title:"My Shopping Cart",visible:i,onClose:f,footer:Object(_.jsx)(G,{price:null!==(e=null===h||void 0===h?void 0:h.totalPrice)&&void 0!==e?e:0,cancel:f,disableCheckout:!(null===h||void 0===h||null===(t=h.orderItemList)||void 0===t?void 0:t.length),clearCart:function(){return p()}}),children:Object(_.jsx)(q.b,{loading:j,dataSource:null!==(n=null===h||void 0===h?void 0:h.orderItemList)&&void 0!==n?n:[],renderItem:function(e){return Object(_.jsx)(q.b.Item,{children:Object(_.jsx)(q.b.Item.Meta,{avatar:Object(_.jsx)($.a,{src:e.menuItem.imageUrl}),title:e.menuItem.name,description:e.menuItem.description})})}})})]})},Q=n(146),W=n.p+"static/media/logo.65d53d4b.png",X=(n(305),c.Component,i.a.Header),Z=i.a.Content;var ee=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=(t[0],t[1]);return Object(_.jsxs)(i.a,{className:"layout-container",style:{height:"100vh"},children:[Object(_.jsxs)(X,{className:"layout__header",children:[Object(_.jsx)("img",{className:"header__logo",src:W,alt:""}),Object(_.jsx)(K,{})]}),Object(_.jsx)(Z,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:Object(_.jsxs)(Q.a,{children:[Object(_.jsx)(w.a,{exact:!0,path:"/",children:Object(_.jsx)(N,{onSuccess:function(){return n(!0)}})}),Object(_.jsx)(w.a,{path:"/main",children:Object(_.jsx)(H,{})})]})})]})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,313)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};a.a.render(Object(_.jsx)(ee,{}),document.getElementById("root")),te()}},[[299,1,2]]]);
//# sourceMappingURL=main.df76081f.chunk.js.map